---
sections:
  - title: "BuildMark Requirements"
    sections:
      - title: "Command-Line Interface"
        requirements:
          - id: "CLI-001"
            title: "The tool shall provide a command-line interface."
            tests:
              - "Program_Run_VersionFlag_OutputsVersionToConsole"
              - "Program_Run_HelpFlag_OutputsHelpMessage"
              - "IntegrationTest_VersionFlag_OutputsVersion"
              - "IntegrationTest_HelpFlag_OutputsUsageInformation"

          - id: "CLI-002"
            title: "The tool shall display version information when requested."
            tests:
              - "Program_Version_ReturnsValidVersion"
              - "Program_Run_VersionFlag_OutputsVersionToConsole"
              - "Context_Create_ShortVersionFlag_SetsVersionProperty"
              - "Context_Create_LongVersionFlag_SetsVersionProperty"
              - "IntegrationTest_VersionFlag_OutputsVersion"

          - id: "CLI-003"
            title: "The tool shall display help information when requested."
            tests:
              - "Program_Run_HelpFlag_OutputsHelpMessage"
              - "Context_Create_QuestionMarkHelpFlag_SetsHelpProperty"
              - "Context_Create_ShortHelpFlag_SetsHelpProperty"
              - "Context_Create_LongHelpFlag_SetsHelpProperty"
              - "IntegrationTest_HelpFlag_OutputsUsageInformation"

          - id: "CLI-004"
            title: "The tool shall support silent mode to suppress console output."
            tests:
              - "Context_Create_SilentFlag_SetsSilentProperty"
              - "Context_WriteLine_Silent_DoesNotWriteToConsole"
              - "Context_WriteError_Silent_DoesNotWriteToConsole"
              - "IntegrationTest_SilentFlag_SuppressesOutput"

          - id: "CLI-005"
            title: "The tool shall support writing output to a log file."
            tests:
              - "Context_Create_LogArgument_CreatesLogFile"
              - "Context_WriteLine_WithLogFile_WritesToLogFile"
              - "Context_WriteError_WithLogFile_WritesToLogFile"
              - "Context_Dispose_ClosesLogFileProperly"
              - "IntegrationTest_LogParameter_IsAccepted"

          - id: "CLI-006"
            title: "The tool shall support specifying a build version."
            tests:
              - "Context_Create_BuildVersionArgument_SetsBuildVersionProperty"
              - "IntegrationTest_BuildVersionParameter_IsAccepted"

          - id: "CLI-007"
            title: "The tool shall validate command-line arguments."
            tests:
              - "Context_Create_UnsupportedArgument_ThrowsArgumentException"
              - "Context_Create_BuildVersionWithoutValue_ThrowsArgumentException"
              - "Context_Create_ReportWithoutValue_ThrowsArgumentException"
              - "Context_Create_ReportDepthWithoutValue_ThrowsArgumentException"
              - "Context_Create_ReportDepthWithNonIntegerValue_ThrowsArgumentException"
              - "Context_Create_ReportDepthWithZeroValue_ThrowsArgumentException"
              - "Context_Create_ReportDepthWithNegativeValue_ThrowsArgumentException"
              - "Context_Create_ResultsWithoutValue_ThrowsArgumentException"
              - "Context_Create_LogWithoutValue_ThrowsArgumentException"
              - "IntegrationTest_InvalidArgument_ShowsError"

          - id: "CLI-008"
            title: "The tool shall handle invalid file paths gracefully."
            tests:
              - "Context_Create_InvalidLogFilePath_ThrowsInvalidOperationException"

          - id: "CLI-009"
            title: "The tool shall support processing multiple command-line arguments."
            tests:
              - "Context_Create_MultipleArguments_SetsAllPropertiesCorrectly"

          - id: "CLI-010"
            title: "The tool shall return appropriate exit codes."
            tests:
              - "Context_ExitCode_NoErrors_RemainsZero"
              - "Context_WriteError_SetsExitCodeToOne"

      - title: "Git Integration"
        requirements:
          - id: "GIT-001"
            title: "The tool shall analyze Git repository history."
            tests:
              - "BuildInformation_GetBuildInformationAsync_WorksWithExplicitVersion"
              - "BuildInformation_GetBuildInformationAsync_WorksWhenCurrentCommitMatchesLatestTag"
              - "BuildInformation_GetBuildInformationAsync_CollectsIssuesCorrectly"
              - "BuildInformation_GetBuildInformationAsync_HandlesFirstReleaseCorrectly"

          - id: "GIT-002"
            title: "The tool shall identify and parse Git version tags."
            tests:
              - "TagInfo_Constructor_ParsesSimpleVPrefix"
              - "TagInfo_Constructor_ParsesVerPrefix"
              - "TagInfo_Constructor_ParsesReleaseUnderscorePrefix"
              - "TagInfo_Constructor_HandlesNoPrefix"
              - "TagInfo_Constructor_HandlesComplexPrefix"
              - "VersionTag_Constructor_StoresVersionAndHash"
              - "Version_TryCreate_ReturnsNullForInvalidTag"
              - "Version_Create_ThrowsForInvalidTag"

          - id: "GIT-003"
            title: "The tool shall retrieve commit information between versions."
            tests:
              - "BuildInformation_GetBuildInformationAsync_PreReleaseUsesPreviousTag"
              - "BuildInformation_GetBuildInformationAsync_ReleaseSkipsPreReleases"
              - "BuildInformation_GetBuildInformationAsync_OrdersChangesByIndex"

          - id: "GIT-004"
            title: "The tool shall extract build information from repository."
            tests:
              - "BuildInformation_GetBuildInformationAsync_WorksWithExplicitVersion"
              - "BuildInformation_GetBuildInformationAsync_CollectsIssuesCorrectly"
              - "BuildInformation_GetBuildInformationAsync_SeparatesBugAndChangeIssues"
              - "BuildInformation_GetBuildInformationAsync_HandlesFirstReleaseCorrectly"

      - title: "GitHub Integration"
        requirements:
          - id: "GH-001"
            title: "The tool shall connect to GitHub repositories."
            tests:
              - "GitHubRepoConnector_Constructor_CreatesInstance"
              - "GitHubRepoConnector_ImplementsInterface"
              - "RepoConnectorFactory_Create_ReturnsGitHubConnectorForThisRepo"

          - id: "GH-002"
            title: "The tool shall authenticate with GitHub using tokens."
            tests:
              - "GitHubRepoConnector_Constructor_CreatesInstance"

          - id: "GH-003"
            title: "The tool shall fetch issue information from GitHub."
            tests:
              - "BuildInformation_GetBuildInformationAsync_CollectsIssuesCorrectly"
              - "BuildInformation_GetBuildInformationAsync_SeparatesBugAndChangeIssues"

          - id: "GH-004"
            title: "The tool shall fetch pull request information from GitHub."
            tests:
              - "BuildInformation_GetBuildInformationAsync_CollectsIssuesCorrectly"

          - id: "GH-005"
            title: "The tool shall handle GitHub API errors gracefully."
            tests:
              - "BuildInformation_GetBuildInformationAsync_ThrowsWhenNoVersionAndNoTags"
              - "BuildInformation_GetBuildInformationAsync_ThrowsWhenNoVersionAndCommitDoesNotMatchTag"

          - id: "GH-006"
            title: "The tool shall support repositories without GitHub integration."
            tests:
              - "RepoConnectorFactory_Create_ReturnsConnector"
              - "MockRepoConnector_Constructor_CreatesInstance"
              - "MockRepoConnector_ImplementsInterface"
              - "MockRepoConnector_GetBuildInformationAsync_ReturnsExpectedVersion"

      - title: "Report Generation"
        requirements:
          - id: "RPT-001"
            title: "The tool shall generate markdown reports."
            tests:
              - "Context_Create_ReportArgument_SetsReportFileProperty"
              - "BuildInformation_ToMarkdown_GeneratesCorrectMarkdownWithDefaults"
              - "IntegrationTest_ReportParameter_IsAccepted"

          - id: "RPT-002"
            title: "The tool shall support configurable report depth."
            tests:
              - "Context_Create_ReportDepthArgument_SetsReportDepthProperty"
              - "BuildInformation_ToMarkdown_RespectsCustomHeadingDepth"
              - "IntegrationTest_ReportDepthParameter_IsAccepted"

          - id: "RPT-003"
            title: "The tool shall report version information in build notes."
            tests:
              - "BuildInformation_ToMarkdown_GeneratesCorrectMarkdownWithDefaults"
              - "BuildInformation_GetBuildInformationAsync_WorksWithExplicitVersion"
              - "BuildInformation_GetBuildInformationAsync_WorksWhenCurrentCommitMatchesLatestTag"

          - id: "RPT-004"
            title: "The tool shall report changes in build notes."
            tests:
              - "BuildInformation_GetBuildInformationAsync_SeparatesBugAndChangeIssues"
              - "BuildInformation_ToMarkdown_DisplaysNAForEmptyChanges"
              - "BuildInformation_GetBuildInformationAsync_OrdersChangesByIndex"

          - id: "RPT-005"
            title: "The tool shall report bug fixes in build notes."
            tests:
              - "BuildInformation_GetBuildInformationAsync_SeparatesBugAndChangeIssues"
              - "BuildInformation_ToMarkdown_DisplaysNAForEmptyBugs"

          - id: "RPT-006"
            title: "The tool shall support including known issues in build notes."
            tests:
              - "Context_Create_IncludeKnownIssuesFlag_SetsIncludeKnownIssuesProperty"
              - "Program_Run_ReportWithIncludeKnownIssuesFlag_GeneratesReportWithKnownIssues"
              - "BuildInformation_ToMarkdown_IncludesKnownIssuesWhenRequested"

          - id: "RPT-007"
            title: "The tool shall support filtering build notes by version range."
            tests:
              - "BuildInformation_GetBuildInformationAsync_PreReleaseUsesPreviousTag"
              - "BuildInformation_GetBuildInformationAsync_ReleaseSkipsPreReleases"

          - id: "RPT-008"
            title: "The tool shall include hyperlinks to issues and pull requests."
            tests:
              - "WebLink_Constructor_StoresTextAndUrl"
              - "BuildInformation_ToMarkdown_IncludesIssueLinks"
              - "BuildInformation_ToMarkdown_IncludesFullChangelogWhenLinkPresent"

          - id: "RPT-009"
            title: "The tool shall format build notes with proper markdown structure."
            tests:
              - "BuildInformation_ToMarkdown_GeneratesCorrectMarkdownWithDefaults"
              - "BuildInformation_ToMarkdown_RespectsCustomHeadingDepth"
              - "BuildInformation_ToMarkdown_UsesCorrectTableWidths"
              - "BuildInformation_ToMarkdown_HandlesFirstReleaseWithNA"
              - "BuildInformation_ToMarkdown_ExcludesFullChangelogWhenNoBaseline"

      - title: "Validation and Testing"
        requirements:
          - id: "VAL-001"
            title: "The tool shall support self-validation mode."
            tests:
              - "Context_Create_ValidateFlag_SetsValidateProperty"
              - "Program_Run_ValidateFlag_OutputsValidationMessage"
              - "IntegrationTest_ValidateFlag_RunsSelfValidation"

          - id: "VAL-002"
            title: "The tool shall write validation results to test result files."
            tests:
              - "Context_Create_ResultsArgument_SetsResultsFileProperty"
              - "IntegrationTest_ResultsParameter_IsAccepted"

          - id: "VAL-003"
            title: "The tool shall support TRX format for test results."
            tests:
              - "Context_Create_ResultsArgument_SetsResultsFileProperty"
              - "IntegrationTest_ResultsParameter_IsAccepted"

          - id: "VAL-004"
            title: "The tool shall support JUnit format for test results."
            tests:
              - "Context_Create_ResultsArgument_SetsResultsFileProperty"
              - "IntegrationTest_ResultsParameter_IsAccepted"

      - title: "Data Models"
        requirements:
          - id: "MDL-001"
            title: "The tool shall model version tags with semantic versioning."
            tests:
              - "VersionTag_Constructor_StoresVersionAndHash"
              - "TagInfo_Constructor_ParsesSimpleVPrefix"
              - "TagInfo_Constructor_ParsesVerPrefix"
              - "TagInfo_Constructor_ParsesReleaseUnderscorePrefix"
              - "TagInfo_Constructor_DetectsAlphaPreRelease"
              - "TagInfo_Constructor_DetectsBetaPreRelease"
              - "TagInfo_Constructor_DetectsRcPreRelease"
              - "TagInfo_Constructor_DetectsPrePreRelease"
              - "TagInfo_Constructor_ParsesBuildMetadata"
              - "Version_TryCreate_ReturnsNullForInvalidTag"
              - "Version_Create_ThrowsForInvalidTag"

          - id: "MDL-002"
            title: "The tool shall model item information for issues and pull requests."
            tests:
              - "BuildInformation_GetBuildInformationAsync_CollectsIssuesCorrectly"
              - "BuildInformation_GetBuildInformationAsync_SeparatesBugAndChangeIssues"

          - id: "MDL-003"
            title: "The tool shall model web links for markdown generation."
            tests:
              - "WebLink_Constructor_StoresTextAndUrl"
              - "BuildInformation_ToMarkdown_IncludesIssueLinks"
              - "BuildInformation_ToMarkdown_IncludesFullChangelogWhenLinkPresent"

          - id: "MDL-004"
            title: "The tool shall model build information with changes, bugs, and known issues."
            tests:
              - "BuildInformation_GetBuildInformationAsync_WorksWithExplicitVersion"
              - "BuildInformation_GetBuildInformationAsync_CollectsIssuesCorrectly"
              - "BuildInformation_GetBuildInformationAsync_SeparatesBugAndChangeIssues"
              - "BuildInformation_ToMarkdown_IncludesKnownIssuesWhenRequested"

      - title: "Repository Connectors"
        requirements:
          - id: "RCN-001"
            title: "The tool shall provide a factory for creating repository connectors."
            tests:
              - "RepoConnectorFactory_Create_ReturnsConnector"
              - "RepoConnectorFactory_Create_ReturnsGitHubConnectorForThisRepo"

          - id: "RCN-002"
            title: "The tool shall support GitHub repository connector."
            tests:
              - "GitHubRepoConnector_Constructor_CreatesInstance"
              - "GitHubRepoConnector_ImplementsInterface"

          - id: "RCN-003"
            title: "The tool shall support mock repository connector for testing."
            tests:
              - "MockRepoConnector_Constructor_CreatesInstance"
              - "MockRepoConnector_ImplementsInterface"
              - "MockRepoConnector_GetBuildInformationAsync_ReturnsExpectedVersion"

      - title: "Platform Support"
        requirements:
          - id: "PLT-001"
            title: "The tool shall run on Windows operating systems."
            tests:
              - "Program_Run_VersionFlag_OutputsVersionToConsole"
              - "Program_Run_HelpFlag_OutputsHelpMessage"
              - "IntegrationTest_VersionFlag_OutputsVersion"
              - "IntegrationTest_HelpFlag_OutputsUsageInformation"
              - "IntegrationTest_ValidateFlag_RunsSelfValidation"
              - "Context_Create_ReportArgument_SetsReportFileProperty"
              - "Context_Create_LogArgument_CreatesLogFile"

          - id: "PLT-002"
            title: "The tool shall run on Linux operating systems."
            tests:
              - "Program_Run_VersionFlag_OutputsVersionToConsole"
              - "Program_Run_HelpFlag_OutputsHelpMessage"
              - "IntegrationTest_VersionFlag_OutputsVersion"
              - "IntegrationTest_HelpFlag_OutputsUsageInformation"
              - "IntegrationTest_ValidateFlag_RunsSelfValidation"
              - "Context_Create_ReportArgument_SetsReportFileProperty"
              - "Context_Create_LogArgument_CreatesLogFile"

          - id: "PLT-003"
            title: "The tool shall support .NET 8.0 runtime."
            tests:
              - "Program_Run_VersionFlag_OutputsVersionToConsole"
              - "IntegrationTest_VersionFlag_OutputsVersion"
              - "IntegrationTest_ValidateFlag_RunsSelfValidation"
              - "BuildInformation_GetBuildInformationAsync_WorksWithExplicitVersion"
              - "TagInfo_Constructor_ParsesSimpleVPrefix"

          - id: "PLT-004"
            title: "The tool shall support .NET 9.0 runtime."
            tests:
              - "Program_Run_VersionFlag_OutputsVersionToConsole"
              - "IntegrationTest_VersionFlag_OutputsVersion"
              - "IntegrationTest_ValidateFlag_RunsSelfValidation"
              - "BuildInformation_GetBuildInformationAsync_WorksWithExplicitVersion"
              - "TagInfo_Constructor_ParsesSimpleVPrefix"

          - id: "PLT-005"
            title: "The tool shall support .NET 10.0 runtime."
            tests:
              - "Program_Run_VersionFlag_OutputsVersionToConsole"
              - "IntegrationTest_VersionFlag_OutputsVersion"
              - "IntegrationTest_ValidateFlag_RunsSelfValidation"
              - "BuildInformation_GetBuildInformationAsync_WorksWithExplicitVersion"
              - "TagInfo_Constructor_ParsesSimpleVPrefix"
